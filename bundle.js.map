{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://js-wthr/./src/getIpData.js","webpack://js-wthr/./src/getCityWeather.js","webpack://js-wthr/./src/getCityInput.js","webpack://js-wthr/./src/createCard.js","webpack://js-wthr/./src/storage.js","webpack://js-wthr/./src/cityClickListener.js","webpack://js-wthr/./src/weatherApp.js","webpack://js-wthr/./src/index.js"],"sourcesContent":["export async function getIpData() {\n  try {\n    const response = await fetch(\"https://ipapi.co/json/\");\n\n    if (response.ok) {\n      const data = await response.json();\n      return data;\n    }\n  } catch (e) {\n    console.log(e);\n  }\n}\n","export async function getCityWeather(ipData) {\n  const MY_KEY = \"56f47affbfbb9ca1677d4f24e14ea341\";\n\n  try {\n    const response = await fetch(\n      `https://api.openweathermap.org/data/2.5/weather?lat=${ipData.latitude}&lon=${ipData.longitude}&lang=ru&units=metric&appid=${MY_KEY}`\n    );\n\n    if (response.ok) {\n      const data = await response.json();\n      return data;\n    }\n  } catch (error) {\n    console.error(error);\n  }\n}\n","export async function getCityInput(cityName) {\n  const MY_KEY = \"56f47affbfbb9ca1677d4f24e14ea341\";\n\n  try {\n    const response = await fetch(\n      `http://api.openweathermap.org/data/2.5/weather?q=${cityName}&lang=ru&units=metric&appid=${MY_KEY}`\n    );\n\n    if (response.ok) {\n      const data = await response.json();\n      return data;\n    }\n  } catch (error) {\n    console.error(error);\n  }\n}\n","/* eslint-disable no-undef */\nexport function createCard(el, weatherData) {\n  el.innerHTML = `\n        <div class=\"weather-wrap\">\n          <div class=\"list-city\">\n            <ul></ul>\n          </div>\n          <div class=\"city-info\">\n            <p class=\"city\"><span><b>Город: </b></span>${weatherData.name}</p>\n            <p class=\"temp\"><span><b>Температура: </b></span>${weatherData.main.temp.toFixed(\n              1\n            )} &#8451;</p>\n            <p class=\"weather\"><span><b>Погода: </b></span>${\n              weatherData.weather[0].description\n            }</p>\n            <div class=\"icon\">\n                <img src = \"https://openweathermap.org/img/wn/${\n                  weatherData.weather[0].icon\n                }@2x.png\">\n          </div>\n        </div>\n    `;\n  createMap(el, weatherData);\n}\n\nfunction createMap(el, weatherData) {\n  const map = document.createElement(\"div\");\n  map.setAttribute(\"id\", \"map\");\n  el.querySelector(\".weather-wrap\").append(map);\n\n  ymaps.ready(init);\n\n  function init() {\n    // Создание карты.\n    var myMap = new ymaps.Map(\"map\", {\n      // Координаты центра карты.\n      // Порядок по умолчанию: «широта, долгота».\n      center: [weatherData.coord.lat, weatherData.coord.lon],\n      // Уровень масштабирования. Допустимые значения: от 0 (весь мир) до 19.\n      zoom: 12,\n    });\n\n    var myPlacemark = new ymaps.Placemark([\n      weatherData.coord.lat,\n      weatherData.coord.lon,\n    ]);\n\n    myMap.geoObjects.add(myPlacemark);\n  }\n}\n","export function readStorage() {\n  const items = JSON.parse(localStorage.getItem(\"city\"));\n  return items || [];\n}\n\nexport function saveStorage(cityName) {\n  const items = readStorage();\n\n  if (items.includes(cityName)) {\n    window.alert(\"Такой город уже добавлен!\");\n    return null;\n  }\n\n  if (items.length === 10) {\n    items.shift();\n  }\n\n  items.push(cityName);\n  localStorage.setItem(\"city\", JSON.stringify(items));\n}\n\nexport function showStorage(items, el) {\n  el.innerHTML = `\n        ${items.map((item) => `<li>${item}</li>`).join(\"\")}\n    `;\n}\n","import { getCityInput } from \"./getCityInput\";\nimport { createCard } from \"./createCard\";\n\nexport function cityClickListener() {\n  const cityList = document.querySelectorAll(\"div.list-city > ul > li\");\n  cityList.forEach((city) => {\n    city.addEventListener(\"click\", async () => {\n      const cityName = city.textContent;\n      const container = document.querySelector(\".container\");\n      const weatherData = await getCityInput(cityName);\n      createCard(container, weatherData);\n    });\n  });\n}\n","import { getIpData } from \"./getIpData\";\nimport { getCityWeather } from \"./getCityWeather\";\nimport { getCityInput } from \"./getCityInput\";\nimport { createCard } from \"./createCard\";\nimport { readStorage, saveStorage, showStorage } from \"./storage\";\nimport { cityClickListener } from \"./cityClickListener\";\n\nexport async function weatherApp(el) {\n  el.innerHTML = `\n        <div class=\"container\">\n        </div>\n    `;\n\n  const container = document.querySelector(\".container\");\n\n  const items = await readStorage();\n  const ipData = await getIpData();\n  const weatherData = await getCityWeather(ipData);\n\n  const weatherCard = container;\n\n  createCard(weatherCard, weatherData);\n\n  container.innerHTML += `\n  <div class=\"form-wrap\">\n      <div class=\"form\">\n          <form class=\"search-form\">\n              <label class=\"search-form__label\">Город: </label>\n              <input class=\"search-form__input\" type=\"text\" placeholder=\"Введите название города\" required />\n              <button class=\"search-form__button\">Отправить</button>\n          </form>\n      </div>\n  </div>\n  `;\n\n  const ul = document.querySelector(\"div.list-city ul\");\n  showStorage(items, ul);\n  inputSubmitListener();\n  cityClickListener();\n}\n\nexport function inputSubmitListener() {\n  const form = document.querySelector(\"form\");\n  const input = document.querySelector(\"input\");\n  const container = document.querySelector(\".container\");\n\n  form.addEventListener(\"submit\", async (e) => {\n    e.preventDefault();\n\n    const cityName = input.value;\n    const weatherData = await getCityInput(cityName);\n\n    if (!weatherData) {\n      alert(`Город '${cityName}' не найден!`);\n      return null;\n    }\n\n    createCard(container, weatherData);\n\n    saveStorage(cityName);\n    const items = await readStorage();\n    const ul = document.querySelector(\"div.list-city ul\");\n    showStorage(items, ul);\n    input.value = \"\";\n    cityClickListener();\n  });\n}\n","import { weatherApp } from \"./weatherApp\";\nimport \"../public/css/style.scss\";\n\nconst el = document.querySelector(\"#app\");\nweatherApp(el);\n"],"names":["getIpData","fetch","response","ok","json","data","console","log","getCityWeather","ipData","latitude","longitude","error","getCityInput","cityName","createCard","el","weatherData","innerHTML","name","main","temp","toFixed","weather","description","icon","map","document","createElement","setAttribute","querySelector","append","ymaps","ready","myMap","Map","center","coord","lat","lon","zoom","myPlacemark","Placemark","geoObjects","add","createMap","readStorage","JSON","parse","localStorage","getItem","saveStorage","items","includes","window","alert","length","shift","push","setItem","stringify","showStorage","item","join","i","cityClickListener","querySelectorAll","forEach","city","addEventListener","textContent","container","ul","inputSubmitListener","form","input","e","preventDefault","value","weatherApp"],"sourceRoot":""}